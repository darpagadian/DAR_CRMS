import{B as z,x as F,i as f,d as y,j as i,o as u,c as m,w as n,b as t,a as q,t as G,f as r,g as w,J as H,O as S}from"./app-BRGP3ZYi.js";const I={class:"text-h5"},K={style:{"text-align":"end"}},Q=z({__name:"Modal",props:{data:{type:Object,default:null},account:{type:Object,default:null},value:{type:Boolean,default:!1},action:{type:String}},emits:["reloadAccounts","input"],setup(V,{emit:B}){const p=B,s=V,e=F({id:null,name:null,email:null,password:null,designation:"",office:null,account_type:null,division:null,section:null});f(()=>s.account,l=>{s.action=="Update"&&(e.id=l.id,e.name=l.name,e.designation=l.designation,e.email=l.email,e.account_type=l.account_type,e.office=l.office.id,e.division=l.division.id,l.section&&(e.section=l.section.id))});const b=y(!1);f(()=>s.value,l=>{b.value=l});const g=y(""),x=y();f(()=>s.action,l=>{g.value=l}),f(()=>e.division,l=>{l&&(x.value=N(l))});const N=l=>{H.get("/division/sections",{params:{option:"section",code:l}}).then(o=>{x.value=o.data}).catch(o=>console.log(o))},k=y(!1),O=async()=>{g.value=="Add"?S.post("/accounts/add",e):g.value=="Update"&&S.post("/accounts/update",e),p("input",!1),p("reloadAccounts")},D=l=>{p("input",l),p("reloadAccounts")};return(l,o)=>{const j=i("v-card-title"),_=i("v-text-field"),d=i("v-col"),c=i("v-row"),P=i("v-checkbox"),v=i("v-select"),U=i("v-card-text"),T=i("v-spacer"),$=i("v-divider"),A=i("v-icon"),C=i("v-btn"),E=i("v-card-action"),J=i("v-card"),M=i("v-dialog");return u(),m(M,{modelValue:b.value,"onUpdate:modelValue":o[11]||(o[11]=a=>b.value=a),width:"600",scrollable:"",persistent:""},{default:n(()=>[t(J,null,{default:n(()=>[t(j,{class:"bg-indigo"},{default:n(()=>[q("span",I,G(s.action)+" Account",1)]),_:1}),s.account.account_type!="admin"?(u(),m(U,{key:0},{default:n(()=>[t(c,{style:{"margin-bottom":"-30px"}},{default:n(()=>[t(d,{cols:"12"},{default:n(()=>[t(_,{"prepend-icon":"mdi-account",label:"Name*",modelValue:e.name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.name=a),variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(c,{style:{"margin-bottom":"-30px"}},{default:n(()=>[t(d,{cols:"12"},{default:n(()=>[t(_,{"prepend-icon":"mdi-email",label:"Email*",modelValue:e.email,"onUpdate:modelValue":o[1]||(o[1]=a=>e.email=a),variant:"outlined",type:"email",required:""},null,8,["modelValue"])]),_:1})]),_:1}),t(c,{style:{"margin-bottom":"-30px"}},{default:n(()=>[t(d,{cols:"9"},{default:n(()=>[s.action=="Add"?(u(),m(_,{key:0,"prepend-icon":"mdi-lock",label:"Password*",modelValue:e.password,"onUpdate:modelValue":o[2]||(o[2]=a=>e.password=a),variant:"outlined",type:k.value?"text":"password",required:""},null,8,["modelValue","type"])):r("",!0)]),_:1}),t(d,{cols:"3"},{default:n(()=>[s.action=="Add"?(u(),m(P,{key:0,modelValue:k.value,"onUpdate:modelValue":o[3]||(o[3]=a=>k.value=a),label:"Show"},null,8,["modelValue"])):r("",!0)]),_:1})]),_:1}),t(c,{style:{"margin-bottom":"-30px"}},{default:n(()=>[t(d,{cols:"12"},{default:n(()=>[t(v,{"prepend-icon":"mdi-map-marker",label:"Office*",modelValue:e.office,"onUpdate:modelValue":o[4]||(o[4]=a=>e.office=a),variant:"outlined",items:V.data.offices,"item-title":"name","item-value":"id",required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),t(c,{style:{"margin-bottom":"-30px"}},{default:n(()=>[t(d,{cols:"12"},{default:n(()=>[t(v,{"prepend-icon":"mdi-account-circle",label:"Account_type*",modelValue:e.account_type,"onUpdate:modelValue":o[5]||(o[5]=a=>e.account_type=a),variant:"outlined",items:["user","admin","planning","special-user"],"item-title":"name",clearable:"",required:""},null,8,["modelValue"])]),_:1})]),_:1}),t(c,{style:{"margin-bottom":"-30px"}},{default:n(()=>[t(d,{cols:"12"},{default:n(()=>[e.account_type=="user"||e.account_type=="special-user"?(u(),m(_,{key:0,"prepend-icon":"mdi-account",label:"Designation*",modelValue:e.designation,"onUpdate:modelValue":o[6]||(o[6]=a=>e.designation=a),variant:"outlined"},null,8,["modelValue"])):r("",!0)]),_:1})]),_:1}),t(c,{style:{"margin-bottom":"-30px"}},{default:n(()=>[t(d,{cols:"12"},{default:n(()=>[e.account_type=="user"||e.account_type=="special-user"?(u(),m(v,{key:0,"prepend-icon":"mdi-map-marker",label:"Division*",modelValue:e.division,"onUpdate:modelValue":o[7]||(o[7]=a=>e.division=a),variant:"outlined",items:V.data.divisions,"item-title":"division_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):r("",!0)]),_:1})]),_:1}),t(c,{style:{"margin-bottom":"-30px"}},{default:n(()=>[t(d,{cols:"12"},{default:n(()=>[e.account_type=="user"||e.account_type=="special-user"||e.division?(u(),m(v,{key:0,"prepend-icon":"mdi-map-marker",label:"Section*",modelValue:e.section,"onUpdate:modelValue":o[8]||(o[8]=a=>e.section=a),variant:"outlined",items:x.value,"item-title":"section_name","item-value":"id",clearable:"",required:""},null,8,["modelValue","items"])):r("",!0)]),_:1})]),_:1})]),_:1})):(u(),m(U,{key:1},{default:n(()=>[w(" This account is an Administrator cannot be edited ")]),_:1})),t(T),t(E,null,{default:n(()=>[t($),q("div",K,[t(C,{class:"ma-2",color:"blue-grey-lighten-2",onClick:o[9]||(o[9]=a=>D(!1))},{default:n(()=>[t(A,{start:"",icon:"mdi-cancel"}),w(" Cancel ")]),_:1}),t(C,{class:"ma-2",color:"green-darken-1",type:"button",onClick:o[10]||(o[10]=a=>O())},{default:n(()=>[w(" Save "),t(A,{end:"",icon:"mdi-check"})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{Q as _};
