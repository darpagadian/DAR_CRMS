var a={};Object.defineProperty(a,"__esModule",{value:!0});var L=a.Printd=a.createIFrame=a.createLinkStyle=a.createStyle=void 0,A=/^(((http[s]?)|file):)?(\/\/)+([0-9a-zA-Z-_.=?&].+)$/,P=/^((\.|\.\.)?\/)([0-9a-zA-Z-_.=?&]+\/)*([0-9a-zA-Z-_.=?&]+)$/,p=function(i){return A.test(i)||P.test(i)};function y(i,t){var e=i.createElement("style");return e.appendChild(i.createTextNode(t)),e}a.createStyle=y;function m(i,t){var e=i.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=t,e}a.createLinkStyle=m;function b(i){var t=window.document.createElement("iframe");return t.setAttribute("src","about:blank"),t.setAttribute("style","visibility:hidden;width:0;height:0;position:absolute;z-index:-9999;bottom:0;"),t.setAttribute("width","0"),t.setAttribute("height","0"),t.setAttribute("wmode","opaque"),i.appendChild(t),t}a.createIFrame=b;var C={parent:window.document.body,headElements:[],bodyElements:[]},E=function(){function i(t){this.isLoading=!1,this.hasEvents=!1,this.opts=[C,t||{}].reduce(function(e,s){return Object.keys(s).forEach(function(o){return e[o]=s[o]}),e},{}),this.iframe=b(this.opts.parent)}return i.prototype.getIFrame=function(){return this.iframe},i.prototype.print=function(t,e,s,o){if(!this.isLoading){var f=this.iframe,v=f.contentDocument,d=f.contentWindow;if(!(!v||!d)&&(this.iframe.src="about:blank",this.elCopy=t.cloneNode(!0),!!this.elCopy)){this.isLoading=!0,this.callback=o;var n=d.document;n.open(),n.write('<!DOCTYPE html><html><head><meta charset="utf-8"></head><body></body></html>'),this.addEvents();var c=this.opts,u=c.headElements,l=c.bodyElements;Array.isArray(u)&&u.forEach(function(r){return n.head.appendChild(r)}),Array.isArray(l)&&l.forEach(function(r){return n.body.appendChild(r)}),Array.isArray(e)&&e.forEach(function(r){r&&n.head.appendChild(p(r)?m(n,r):y(n,r))}),n.body.appendChild(this.elCopy),Array.isArray(s)&&s.forEach(function(r){if(r){var h=n.createElement("script");p(r)?h.src=r:h.innerText=r,n.body.appendChild(h)}}),n.close()}}},i.prototype.printURL=function(t,e){this.isLoading||(this.addEvents(),this.isLoading=!0,this.callback=e,this.iframe.src=t)},i.prototype.onBeforePrint=function(t){this.onbeforeprint=t},i.prototype.onAfterPrint=function(t){this.onafterprint=t},i.prototype.launchPrint=function(t){this.isLoading||t.print()},i.prototype.addEvents=function(){var t=this;if(!this.hasEvents){this.hasEvents=!0,this.iframe.addEventListener("load",function(){return t.onLoad()},!1);var e=this.iframe.contentWindow;e&&(this.onbeforeprint&&e.addEventListener("beforeprint",this.onbeforeprint),this.onafterprint&&e.addEventListener("afterprint",this.onafterprint))}},i.prototype.onLoad=function(){var t=this;if(this.iframe){this.isLoading=!1;var e=this.iframe,s=e.contentDocument,o=e.contentWindow;if(!s||!o)return;typeof this.callback=="function"?this.callback({iframe:this.iframe,element:this.elCopy,launchPrint:function(){return t.launchPrint(o)}}):this.launchPrint(o)}},i}();L=a.Printd=E;a.default=E;export{L as P};
