import{A as E}from"./AppLayout-nowU_rAO.js";import{_ as F}from"./Modal.vue_vue_type_script_setup_true_lang-B81YVtAt.js";import{d as m,i as L,j as c,o as i,c as y,w as s,a as t,b as a,g as u,t as l,u as S,k as T,e as p,h as P,F as V,O as x}from"./app-BRGP3ZYi.js";import{S as w}from"./sweetalert2.all-CCs1Ll_A.js";import"./dar-logo-BEVYNDow.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Accounts ",-1),Y={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},H={class:"w-full m-5 text-right"},J={class:"text-right m-5"},K=t("thead",null,[t("tr",null,[t("th",{class:"text-left"}," # "),t("th",{class:"text-left"}," Name "),t("th",{class:"text-left"}," Designation "),t("th",{class:"text-left"}," Email "),t("th",{class:"text-center"}," Role/Account Type "),t("th",{class:"text-center"}," Actions ")])],-1),Q={class:"text-center"},W={class:"text-center"},X={key:1,span:""},Z={class:"m-2"},tt={style:{color:"gray"}},et={class:"text-center"},it={__name:"Index",props:{accounts:Object,offices:Object,divisions:Object},setup(d){const z=d,B=async o=>{w.fire({html:'<div style="font-weight: bold; font-size:25px">Are you sure you want to reset password for this account?</div> ',icon:"warning",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Yes, I'm sure",showLoaderOnConfirm:!0}).then(n=>{n.isConfirmed&&x.post("/accounts/reset-password",{id:o},{onSuccess:()=>{w.fire({title:"Success",icon:"success",text:"Password has been successfully reset."})},onError:()=>{w.fire({title:"Failed",icon:"error",text:this.error?this.error:"Something went wrong please check"})}})})},b=m(!1),k=m(null);m({});const _=m({}),v=m("");L(()=>v.value,o=>{x.get("/accounts",{search:o},{preserveState:!0})});const f=async(o,n,h)=>{b.value=o,k.value=n,_.value=h},O=async()=>{_.value={}};let r=1;const I=async o=>{x.visit("/accounts?page="+o,{preserveState:!0}),r=o};return(o,n)=>{const h=c("v-text-field"),C=c("v-col"),g=c("v-btn"),N=c("v-row"),A=c("v-chip"),$=c("v-pagination"),j=c("v-table"),R=c("v-card");return i(),y(E,{title:"Dashboard"},{header:s(()=>[M]),default:s(()=>[t("div",Y,[t("div",q,[t("div",G,[a(N,{style:{"margin-bottom":"-30px"}},{default:s(()=>[a(C,null,{default:s(()=>[t("div",H,[a(h,{loading:o.loading,"append-inner-icon":"mdi-magnify",density:"compact",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=e=>v.value=e),"onClick:appendInner":o.onClick},null,8,["loading","modelValue","onClick:appendInner"])])]),_:1}),a(C,null,{default:s(()=>[t("div",J,[a(g,{onClick:n[1]||(n[1]=e=>f(!0,"Add",{})),size:"small","prepend-icon":"mdi-plus",color:"green"},{default:s(()=>[u(" Account ")]),_:1})])]),_:1})]),_:1}),a(R,{class:"m-3"},{default:s(()=>[a(j,null,{bottom:s(()=>[t("div",Z,[t("span",tt,[u(" Showing "+l(d.accounts.meta.from)+" to "+l(d.accounts.meta.to)+" out of ",1),t("b",null,l(d.accounts.meta.total)+" records",1)]),t("div",et,[a($,{modelValue:S(r),"onUpdate:modelValue":n[2]||(n[2]=e=>T(r)?r.value=e:r=e),length:d.accounts.meta.last_page,circle:"",onClick:n[3]||(n[3]=e=>I(S(r)))},null,8,["modelValue","length"])])])]),default:s(()=>[K,t("tbody",null,[(i(!0),p(V,null,P(d.accounts.data,(e,U)=>(i(),p("tr",{key:e.id,class:"hover:bg-gray-200"},[e?(i(),p(V,{key:0},[t("td",null,l(U+1),1),t("td",null,l(e.name),1),t("td",null,l(e.designation),1),t("td",null,l(e.email),1),t("td",Q,[e.account_type=="admin"?(i(),y(A,{key:0,class:"bg-indigo",size:"small"},{default:s(()=>[u(l(e.account_type),1)]),_:2},1024)):(i(),y(A,{key:1,class:"bg-green",size:"small"},{default:s(()=>[u(l(e.account_type),1)]),_:2},1024))]),t("td",W,[a(g,{size:"small",onClick:D=>B(e.id),"prepend-icon":"mdi-lock-reset",color:"secondary",class:"mr-5"},{default:s(()=>[u(" Reset ")]),_:2},1032,["onClick"]),a(g,{onClick:D=>f(!0,"Update",e),size:"small","prepend-icon":"mdi-update",color:"primary"},{default:s(()=>[u(" Update ")]),_:2},1032,["onClick"])])],64)):(i(),p("td",X," No data at the moment"))]))),128))])]),_:1})]),_:1})])])]),a(F,{value:b.value,account:_.value,data:z,action:k.value,onInput:n[4]||(n[4]=e=>f(o.is_show,o.action,o.user_data)),onReloadAccounts:O},null,8,["value","account","data","action"])]),_:1})}}};export{it as default};
